<?xml version="1.0" encoding="UTF-8"?>

<!-- ====================================================================== -->
<!-- Ant build file (http://ant.apache.org/) for Ant 1.6.2 or above.        -->
<!-- ====================================================================== -->

<project name="5dv153a1_ens15bsf" default="package" basedir=".">

  <!-- ====================================================================== -->
  <!-- Import maven-build.xml into the current project                        -->
  <!-- ====================================================================== -->

  <import file="maven-build.xml"/>
  
  <!-- ====================================================================== -->
  <!-- Help target                                                            -->
  <!-- ====================================================================== -->

  <target name="help">
    <echo message="Please run: $ant -projecthelp"/>
  </target>

  <!-- init -->
  <target name="init">
    <tstamp/>
    <mkdir dir="${maven.build.dir}"/>
  </target>

  <!-- dist -->
  <target name="dist" depends="compile" description="generate distribution">
    <mkdir dir="${maven.build.dir}"/>
    <!-- service AAR -->
    <copy todir="${maven.build.dir}/META-INF">
      <fileset dir="${maven.build.resourceDir.0}">
        <include name="services.xml"/>
      </fileset>
      <fileset dir="${maven.build.wsdl}">
        <include name="service.wsdl"/>
      </fileset>
    </copy>
    <jar jarfile="${maven.build.dir}" basedir="${.}"/>
    <!-- cleanup -->
    <delete dir="${maven.build.dir}"/>
  </target>

  <!-- deploy -->
  <target name="deploy" description="deploy service">
    <!-- copy service archive to repository -->
    <copy todir="${env.AXIS2_HOME}/repository/services">
      <fileset dir="${maven.build.dir}">
        <include name="${ant.project.name}.aar"/>
      </fileset>
    </copy>
  </target>

  <!-- undeploy -->
  <target name="undeploy" description="undeploy service">
    <!-- remove service archive from repository -->
    <delete>
      <fileset dir="${env.AXIS2_HOME}/repository/services">
        <include name="${ant.project.name}.aar"/>
      </fileset>
    </delete>
  </target>

  <!-- clean -->
  <target name="clean" description="clean up">
    <delete dir="${maven.build.dir}"/>
    <delete file="${maven.build.dir}/aar"/>
    <delete>
      <fileset dir="." includes="**/*.tmp"/>
    </delete>
  </target>

</project>
