<?xml version="1.0" encoding="UTF-8"?>

<!-- ====================================================================== -->
<!-- Ant build file (http://ant.apache.org/) for Ant 1.6.2 or above.        -->
<!-- ====================================================================== -->

<project name="5dv153a1_ens15bsf" default="package" basedir=".">

    <property environment="env"/>

    <!-- ====================================================================== -->
    <!-- Import maven-build.xml into the current project                        -->
    <!-- ====================================================================== -->

    <import file="maven-build.xml"/>

    <!-- ====================================================================== -->
    <!-- Help target                                                            -->
    <!-- ====================================================================== -->

    <target name="help">
        <echo message="Please run: $ant -projecthelp"/>
    </target>

    <!-- init -->
    <target name="init">
        <tstamp/>
        <mkdir dir="${maven.build.dir}"/>
    </target>

    <target name="wsdl2code" depends="get-deps">
        <exec command="mvn axis2-wsdl2code:wsdl2code"/>
    </target>

    <target name="generate-resources" depends="wsdl2code">
        <exec command="mvn axis2-wsdl2code:wsdl2code"/>
        <exec command="mvn generate-resources"/>
    </target>

    <target name="generate-sources" depends="generate-resources">
        <exec command="mvn generate-sources"/>
    </target>

    <target name="explodeaar" depends="compile">
        <exec command="mvn axis2-aar:exploded"/>
    </target>

    <!-- dist -->
    <target name="dist" depends="compile" description="generate distribution">
        <mkdir dir="${maven.build.dir}"/>
        <exec command="mvn package"/>
        <!-- service AAR -->
        <exec command="mvn axis2-aar:aar"/>
        <jar jarfile="${maven.build.dir}" basedir="${.}"/>
        <!-- cleanup -->
        <delete dir="${maven.build.dir}"/>
    </target>

    <!-- deploy -->
    <target name="aar" depends="explodeaar" description="build aar service package">
        <exec command="mvn axis2-aar:aar">
        </exec>
    </target>

    <!-- deploy -->
    <target name="deploy" depends="aar" description="deploy service">
        <exec command="echo ${env.AXIS2_HOME}/repository/services"/>
        <!-- copy service archive to repository -->
        <copy todir="${env.AXIS2_HOME}/repository/services">
            <fileset dir="${maven.build.dir}">
                <include name="${ant.project.name}.aar"/>
            </fileset>
        </copy>
    </target>

    <!-- undeploy -->
    <target name="undeploy" description="undeploy service">
        <!-- remove service archive from repository -->
        <delete>
            <fileset dir="${env.AXIS2_HOME}/repository/services">
                <include name="${ant.project.name}.aar"/>
            </fileset>
        </delete>
    </target>

    <!-- clean -->
    <target name="clean" description="clean up">
        <delete dir="${maven.build.dir}"/>
        <delete file="${maven.build.dir}/aar"/>
        <delete>
            <fileset dir="." includes="**/*.tmp"/>
        </delete>
    </target>

</project>

